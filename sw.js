const VERSION="1.1.0",CACHE_NAME="FOX_CACHE_1.1.0";let cachelist=["/css/index.css","https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"];self.addEventListener("install",async function(t){self.skipWaiting(),t.waitUntil(caches.open(CACHE_NAME).then(function(t){return console.log("Loading cache"),t.addAll(cachelist)}))}),addEventListener("activate",function(){self.clients.claim()}),self.addEventListener("fetch",async t=>{try{t.respondWith(handle(t.request))}catch(e){t.respondWith(handleerr(t.request,e))}});const handleerr=async(t,e)=>new Response(`<h1>FOX_SW Error</h1>
<b>${e}</b>`,{headers:{"content-type":"text/html; charset=utf-8"}});let cdn_mirror={jsdelivr:{url:"https://cdn.jsdelivr.net"},onmicrosoft:{url:"https://jsd.onmicrosoft.cn"},pigax_chenyfan:{url:"https://cdn-jsd.pigax.cn"}};const handle=async function(t){let e=t.url.replace("http://","https://").replace("https://unpkg.com", "https://cdn.jsdelivr.net/npm"),n=e.split("/")[2];if(n.indexOf("cdn.jsdelivr.net")>-1){let r=[];for(let s in cdn_mirror)r.push(e.replace("https://cdn.jsdelivr.net",cdn_mirror[s].url));return e.indexOf("@latest/")>-1?lfetch(r,e):caches.match(t).then(function(n){return n?(console.log("Using Cache:"+e),n):lfetch(r,e).then(function(e){return caches.open(CACHE_NAME).then(function(n){return n.put(t,e.clone()),e})})})}return fetch(t)},lfetch=async(t,e)=>{let n=new AbortController,r=async t=>new Response(await t.arrayBuffer(),{status:t.status,headers:t.headers});return Promise.any||(Promise.any=function(t){return new Promise((e,n)=>{let r=(t=Array.isArray(t)?t:[]).length,s=[];if(0===r)return n(AggregateError("All promises were rejected"));t.forEach(t=>{t.then(t=>{e(t)},t=>{r--,s.push(t),0===r&&n(AggregateError(s))})})})}),Promise.any(t.map(t=>new Promise((e,s)=>{fetch(t,{signal:n.signal}).then(r).then(r=>{200==r.status?(n.abort(),console.log("Using Network:"+t),e(r)):s(r)})})))};